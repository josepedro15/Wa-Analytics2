import{j as e}from"./ui-B2Y7o2X1.js";import{r as d}from"./vendor-BsBmf7g_.js";import{b as I,u as A,C as M,c as R,d as k,e as D,f as P,B as m}from"./index-BYGJTMIk.js";import{I as i}from"./input-CJFPxKXQ.js";import{L as l}from"./label-Dg_mNZli.js";import{T as U,a as V,b as x,c as v}from"./tabs-zqKQZqNL.js";import{u as z}from"./router-Bs1VKYaT.js";import{g as B,E as b,r as E}from"./icons-BPYBiv7x.js";import"./utils-CftW5NT4.js";function Z(){const[n,f]=d.useState(!1),[o,c]=d.useState(!1),{signIn:C,signUp:S,user:u,resetPassword:F}=I(),{toast:r}=A(),p=z(),[h,j]=d.useState({email:"",password:""}),[t,g]=d.useState({email:"",password:"",fullName:"",companyName:""}),[N,y]=d.useState({email:""}),w=(u==null?void 0:u.id)==="1c93324c-65d3-456e-992e-c84e1f7d6ab1";d.useEffect(()=>{u&&p(w?"/sao-miguel":"/dashboard")},[u,p,w]);const T=async s=>{s.preventDefault(),c(!0);try{const{error:a}=await C(h.email,h.password);r(a?{title:"Erro no login",description:a.message==="Invalid login credentials"?"Email ou senha incorretos":a.message,variant:"destructive"}:{title:"Login realizado com sucesso!",description:"Redirecionando para o dashboard..."})}catch{r({title:"Erro inesperado",description:"Tente novamente em alguns instantes",variant:"destructive"})}finally{c(!1)}},q=async s=>{s.preventDefault(),c(!0);try{const{error:a}=await S(t.email,t.password,{full_name:t.fullName,company_name:t.companyName});a?a.message.includes("already registered")?r({title:"Email já cadastrado",description:"Este email já possui uma conta. Faça login.",variant:"destructive"}):r({title:"Erro no cadastro",description:a.message,variant:"destructive"}):r({title:"Conta criada com sucesso!",description:"Verifique seu email para confirmar a conta ou faça login diretamente."})}catch{r({title:"Erro inesperado",description:"Tente novamente em alguns instantes",variant:"destructive"})}finally{c(!1)}},L=async s=>{s.preventDefault(),c(!0);try{const{error:a}=await F(N.email);a?r({title:"Erro ao enviar email",description:a.message,variant:"destructive"}):(r({title:"Email enviado com sucesso!",description:"Verifique sua caixa de entrada e siga as instruções para redefinir sua senha."}),y({email:""}))}catch{r({title:"Erro inesperado",description:"Tente novamente em alguns instantes",variant:"destructive"})}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-elegant flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(B,{className:"h-8 w-8 text-primary"}),e.jsx("span",{className:"text-2xl font-bold text-foreground",children:"MetricsIA"})]}),e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Acesse sua conta"}),e.jsx("p",{className:"text-muted-foreground",children:"Analise seus atendimentos do WhatsApp"})]}),e.jsxs(M,{className:"border-border/50 shadow-elegant",children:[e.jsxs(R,{children:[e.jsx(k,{className:"text-center",children:"Bem-vindo"}),e.jsx(D,{className:"text-center",children:"Entre na sua conta ou crie uma nova"})]}),e.jsx(P,{children:e.jsxs(U,{defaultValue:"login",className:"w-full",children:[e.jsxs(V,{className:"grid w-full grid-cols-3",children:[e.jsx(x,{value:"login",children:"Entrar"}),e.jsx(x,{value:"signup",children:"Cadastrar"}),e.jsx(x,{value:"reset",children:"Redefinir"})]}),e.jsx(v,{value:"login",children:e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"login-email",children:"Email"}),e.jsx(i,{id:"login-email",type:"email",placeholder:"seu@email.com",value:h.email,onChange:s=>j(a=>({...a,email:s.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"login-password",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{id:"login-password",type:n?"text":"password",placeholder:"Digite sua senha",value:h.password,onChange:s=>j(a=>({...a,password:s.target.value})),required:!0}),e.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>f(!n),children:n?e.jsx(b,{className:"h-4 w-4"}):e.jsx(E,{className:"h-4 w-4"})})]})]}),e.jsx(m,{type:"submit",className:"w-full",disabled:o,children:o?"Entrando...":"Entrar"})]})}),e.jsx(v,{value:"signup",children:e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"signup-name",children:"Nome Completo"}),e.jsx(i,{id:"signup-name",type:"text",placeholder:"Seu nome",value:t.fullName,onChange:s=>g(a=>({...a,fullName:s.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"signup-company",children:"Empresa"}),e.jsx(i,{id:"signup-company",type:"text",placeholder:"Sua empresa",value:t.companyName,onChange:s=>g(a=>({...a,companyName:s.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"signup-email",children:"Email"}),e.jsx(i,{id:"signup-email",type:"email",placeholder:"seu@email.com",value:t.email,onChange:s=>g(a=>({...a,email:s.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"signup-password",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{id:"signup-password",type:n?"text":"password",placeholder:"Mínimo 6 caracteres",value:t.password,onChange:s=>g(a=>({...a,password:s.target.value})),required:!0,minLength:6}),e.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>f(!n),children:n?e.jsx(b,{className:"h-4 w-4"}):e.jsx(E,{className:"h-4 w-4"})})]})]}),e.jsx(m,{type:"submit",className:"w-full",disabled:o,children:o?"Cadastrando...":"Criar Conta"})]})}),e.jsx(v,{value:"reset",children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"reset-email",children:"Email"}),e.jsx(i,{id:"reset-email",type:"email",placeholder:"seu@email.com",value:N.email,onChange:s=>y(a=>({...a,email:s.target.value})),required:!0})]}),e.jsx(m,{type:"submit",className:"w-full",disabled:o,children:o?"Enviando...":"Enviar Link de Redefinição"})]})})]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(m,{variant:"link",onClick:()=>p("/"),className:"text-muted-foreground hover:text-foreground",children:"← Voltar para o início"})})]})})}export{Z as default};
