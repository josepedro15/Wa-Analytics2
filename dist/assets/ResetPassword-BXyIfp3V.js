import{j as e}from"./ui-B2Y7o2X1.js";import{r as i}from"./vendor-BsBmf7g_.js";import{b as w,u as v,C as g,c as j,d as N,e as b,f as y,B as d}from"./index-BYGJTMIk.js";import{I as h}from"./input-CJFPxKXQ.js";import{L as u}from"./label-Dg_mNZli.js";import{u as S}from"./router-Bs1VKYaT.js";import{g as C,E as P,r as A,s as E}from"./icons-BPYBiv7x.js";import"./utils-CftW5NT4.js";function R(){const[o,p]=i.useState(!1),[l,n]=i.useState(!1),{updatePassword:x}=w(),{toast:t}=v(),c=S(),[a,m]=i.useState({password:"",confirmPassword:""}),f=async r=>{if(r.preventDefault(),n(!0),a.password!==a.confirmPassword){t({title:"Senhas não coincidem",description:"As senhas digitadas não são iguais.",variant:"destructive"}),n(!1);return}if(a.password.length<6){t({title:"Senha muito curta",description:"A senha deve ter pelo menos 6 caracteres.",variant:"destructive"}),n(!1);return}try{const{error:s}=await x(a.password);s?t({title:"Erro ao atualizar senha",description:s.message,variant:"destructive"}):(t({title:"Senha atualizada com sucesso!",description:"Sua senha foi redefinida. Faça login com a nova senha."}),c("/auth"))}catch{t({title:"Erro inesperado",description:"Tente novamente em alguns instantes",variant:"destructive"})}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-elegant flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(C,{className:"h-8 w-8 text-primary"}),e.jsx("span",{className:"text-2xl font-bold text-foreground",children:"MetricsIA"})]}),e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Redefinir Senha"}),e.jsx("p",{className:"text-muted-foreground",children:"Digite sua nova senha"})]}),e.jsxs(g,{className:"border-border/50 shadow-elegant",children:[e.jsxs(j,{children:[e.jsx(N,{className:"text-center",children:"Nova Senha"}),e.jsx(b,{className:"text-center",children:"Digite sua nova senha abaixo"})]}),e.jsx(y,{children:e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"new-password",children:"Nova Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"new-password",type:o?"text":"password",placeholder:"Mínimo 6 caracteres",value:a.password,onChange:r=>m(s=>({...s,password:r.target.value})),required:!0,minLength:6}),e.jsx(d,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>p(!o),children:o?e.jsx(P,{className:"h-4 w-4"}):e.jsx(A,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"confirm-password",children:"Confirmar Senha"}),e.jsx(h,{id:"confirm-password",type:"password",placeholder:"Digite a senha novamente",value:a.confirmPassword,onChange:r=>m(s=>({...s,confirmPassword:r.target.value})),required:!0,minLength:6})]}),e.jsx(d,{type:"submit",className:"w-full",disabled:l,children:l?"Atualizando...":"Atualizar Senha"})]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs(d,{variant:"link",onClick:()=>c("/auth"),className:"text-muted-foreground hover:text-foreground",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Voltar para o login"]})})]})})}export{R as default};
